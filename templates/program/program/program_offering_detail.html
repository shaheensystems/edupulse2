{% extends "base.html" %}

{% block content %}

<section class='my-2 w-full items-centerflex flex-col '>
   {% comment %} <a href="{% url 'course_offering_detail' course_offerings.pk %}" > {% endcomment %}
            <!-- Course_offering_infobar -->
    
              <h1 class='text-center mt-4 text-xl mb-1'><strong>Program Offering Detail</strong>  </h1>
            
            
            <div class="bg-gray-200 p-4 mb-4 w-full gap-5 flex flex-row justify-between items-baseline">
             
              <div class='w-1/2'>
                {% comment %} <h1><strong>Program Detail</strong>  </h1> {% endcomment %}
                <h2 class="text-xl font-bold my-2">{{ program_offering.temp_id }} : ({{program_offering.offering_mode |title }})
                  <br> {{ program_offering.program.name }}</h2>
                <p><strong>EFTS:</strong> {{ program_offering.program.calculate_program_efts }}</p>
                <p><strong>Description:</strong> {{ program_offering.program.description }}</p>
                
                <p><strong>Program Link:</strong> {{ program_offering.program.program_link }}</p>
                <p><strong>Total Credit:</strong> {{ program_offering.program.total_credit }}</p>
                <p><strong>Duration in week:</strong> {{ program_offering.program.duration_in_week }}</p>
                <p><strong>Start Date:</strong> {{ program_offering.start_date }}</p>
                <p><strong>End Date:</strong> {{ program_offering.end_date }}</p>
                <p><strong>Remark:</strong> {{ program_offering.remark }}</p>
              </div>
            
              <div class='flex flex-row gap-4 flex-wrap items-baseline w-1/2 justify-end align-baseline content-baseline mt-auto'>
              
                <h1>Total Courses : 
                {% if program_offering.offering_mode == "online" %}
                {{program_offering.program.get_list_of_online_course_for_selected_program|length}} 
                {% else %}
                {{program_offering.program.get_list_of_blended_course_for_selected_program|length}} 
                {% endif %}
                  
                </h1>|
                <p class="mb-2">Total Students : {{program_offering.calculate_total_no_of_student|length}}</p> |
                <p class="mb-2">Total Students Enrolled: {{program_offering.calculate_total_student_enrollments|length}}</p> |
                <p class="mb-2">Attendnace Percentage: {{program_offering.calculate_attendance_percentage}} %</p> |
                {% if program_offering.calculate_no_at_risk_student_for_last_week|length  >  0 %}
                <p class='text-red-500'>Students at Risk: {{program_offering.calculate_no_at_risk_student_for_last_week|length}}</p>
                {% else  %}
                <p>Students at Risk: {{program_offering.calculate_no_at_risk_student_for_last_week|length}}</p>
                {% endif %}
                
              </div>
              <!-- Add more course offering details -->
            </div>
            <!--Student Performance -->
      <section id='students_attendance_bar_chart1' class='w-full bg-gray-100 rounded-lg  mb-3' style="display: block; "  >
        {% if program_offering.offering_mode != "online" %}
          {% if attendances|length > 0  %}
            {% with title="Student Performace" chart1_data=chart_data_attendance_report_attendance  chart2_data=chart_data_attendance_report_engagement  chart3_data=chart_data_attendance_report_action  chart1_title='Attendance'  chart2_title='Engagement'  chart3_title='Action'  chart1_id='attendance' chart2_id='engagement'  chart3_id='action' %}
            {% include 'components/dashboard/student_performance_pieChart_flow.html' %}
            {% endwith %}
          {% else %}
            <div class='bg-gray-200 p-4'>
                <p> No students found for students attendance report </p>
            </div>
            
          {% endif %}
        {% endif %}
        
        </section>
            
       
{% if  program_offering.offering_mode == "online" %}

  {% for course in program_offering.program.get_list_of_online_course_for_selected_program %}
        {% with course=course %}
          {% include 'components/flash_card/program_offering_detail_FC.html' %}
        {% endwith %} 
       
  {% endfor %}
{% else %}

  {% for course in program_offering.program.get_list_of_blended_course_for_selected_program %}
        {% with course=course %}
          {% include 'components/flash_card/program_offering_detail_FC.html' %}
        {% endwith %} 
       
  {% endfor %}
{% endif %}



   
  

</section>
   

{% endblock content %}