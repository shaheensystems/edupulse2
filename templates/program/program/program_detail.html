{% extends "base.html" %}

{% block content %}

<section class='my-2 w-full items-centerflex flex-col '>
  
            <!-- Course_offering_infobar -->
    
              <h1 class='text-center mt-4 text-xl mb-1'><strong>Program Detail</strong>  </h1>
            
            
            <div class="bg-gray-200 p-4 mb-4 w-full gap-5 flex flex-row justify-between items-baseline">
             
              <div class='w-1/2'>
                {% comment %} <h1><strong>Program Detail</strong>  </h1> {% endcomment %}
                <h2 class="text-xl font-bold my-2">{{ program.temp_id }} : 
                  <br> {{ program.name }}</h2>
                <p><strong>EFTS:</strong> {{ program.calculate_program_efts }}</p>
                <p><strong>Description:</strong> {{ program.description|default:"" }}</p>
                <p><strong>Program Link:</strong> {{ program.program_link }}</p>
                <p><strong>Total Credit:</strong> {{ program.total_credit }}</p>
                <p><strong>Duration in week:</strong> {{ program.duration_in_week }}</p>
               
                <p><strong>Remark:</strong> {{ program.remark }}</p>
              </div>
            
              <div class='flex flex-row gap-4 flex-wrap items-baseline w-1/2 justify-end align-baseline content-baseline mt-auto'>
                <p class="mb-2 ">Total Program Offerings: {{program.program_offerings.all|length}} (Blended: {{program.get_list_of_blended_program_offerings_for_selected_program.count}}, Online:{{program.get_list_of_online_program_offerings_for_selected_program.count}})</p> |
                <p class="mb-2 ">Total Courses: {{program.course.count}} (Blended: {{program.get_list_of_blended_course_for_selected_program.count}}, Online:{{program.get_list_of_online_course_for_selected_program.count}})</p> |
                <p class="mb-2">Total Students Enrolled: {{program.calculate_total_no_of_student|length}}</p> |
                <p class="mb-2">Attendance Percentage: {{program.calculate_attendance_percentage}} %</p> |
                {% if program.calculate_no_at_risk_student_for_last_week|length  >  0 %}
                <p class='text-red-500'>Students at Risk: {{program.calculate_no_at_risk_student_for_last_week|length}}</p>
                {% else  %}
                <p>Students at Risk: {{program.calculate_no_at_risk_student_for_last_week|length}}</p>
                {% endif %}
                
              </div>
             
              <!-- Add more course offering details -->
            </div>
              <!--Student Performance Chart -->
            <section id='students_attendance_bar_chart1' class='w-full bg-gray-100 rounded-lg  mb-3' style="display: block; "  >

              {% if blended_attendances|length > 0 %}
                {% with title="Student Performace" chart1_data=chart_data_attendance_report_attendance  chart2_data=chart_data_attendance_report_engagement  chart3_data=chart_data_attendance_report_action  chart1_title='Attendance'  chart2_title='Engagement'  chart3_title='Action'  chart1_id='attendance' chart2_id='engagement'  chart3_id='action' %}
                {% include 'components/dashboard/student_performance_pieChart_flow.html' %}
                {% endwith %}
              {% else %}
                <div class='bg-gray-200 p-4'>
                    <p> No students found for students attendance report </p>
                </div>
                
              {% endif %}
              
            </section>
          {% comment %} <div class='flex flex-row flex-wrap gap-4 hidden'>
            <h2 class='text-lg font-semibold '>All Program Offerings</h2>
              <div class='flex flex-row flex-wrap gap-4'>
              {% for program_offering in program.program_offerings.all%}
              <a href="{% url 'program_offering_detail' program_offering.pk %}"> 
                <p class='bg-blue-200 rounded-lg px-4 py-2'>
                  {{program_offering.temp_id}} ({{program_offering.offering_mode |title}})<br>{{program_offering.program.name}}
                </p>
              </a>
              
              
               {% endfor %}
            </div>
            
          </div> {% endcomment %}

          <div class='flex flex-row gap-2 justify-between mx-10 items-start my-10 flex-wrap'>
            
            <!-- Blended Program Offerings -->
           
            {% if program.get_list_of_blended_program_offerings_for_selected_program  %}
            <div class=' flex items-center flex-col'>
              <h2 class='text-lg font-semibold '>Blended Program Offerings</h2>
                  <div class='flex flex-col flex-wrap gap-4'>
                  {% for program_offering in program.get_list_of_blended_program_offerings_for_selected_program %} 
                    <a href="{% url 'program_offering_detail' program_offering.pk %}"> 
                      <p class='bg-blue-200 rounded-lg px-4 py-2'>{{ program_offering.temp_id }} :{{program_offering.program.name}}</p>
                    </a>
                  {% endfor %}

                  </div>
            </div>
            {% endif %}
          
            <!-- Online Program Offerings -->
        
            {% if program.get_list_of_online_program_offerings_for_selected_program %}
            <div class='justify-center items-center  flex flex-col'>
              <h2 class='text-lg font-semibold'>Online Program Offerings</h2>
                  <div class='flex flex-col flex-wrap gap-4'>
                  {% for program_offering in program.get_list_of_online_program_offerings_for_selected_program %}
                    <a href="{% url 'program_offering_detail' program_offering.pk %}"> 
                      <p class='bg-blue-200 rounded-lg px-4 py-2'>{{ program_offering.temp_id }} :{{program_offering.program.name}}</p>
                    </a>
                  {% endfor %}

                  </div>
            </div>
            {% endif %}
            
          </div>
          {% comment %} <div class='flex flex-row gap-2 justify-between mx-10 items-start my-10 flex-wrap '>
            
            <!-- Blended Program Offerings -->
     
            <div class=' flex items-center flex-col'>
              <h2 class='text-lg font-semibold '>Blended Program Offerings</h2>
                  <div class='flex flex-col flex-wrap gap-4'>
                  {% for program_offering in program.program_offerings.all %}
                    {% if program_offering.offering_mode == 'blended' or program_offering.offering_mode == 'micro cred' %}
                    <a href="{% url 'program_offering_detail' program_offering.pk %}"> 
                      <p class='bg-blue-200 rounded-lg px-4 py-2'>{{ program_offering.temp_id }} :{{program_offering.program.name}}</p>
                    </a>
                    {% endif %}
                  {% endfor %}

                  </div>
            </div>
            
          
            <!-- Online Program Offerings -->
          
            <div class='justify-center items-center  flex flex-col'>
              <h2 class='text-lg font-semibold'>Online Program Offerings</h2>
                  <div class='flex flex-col flex-wrap gap-4'>
                  {% for program_offering in program.program_offerings.all %}
                    {% if program_offering.offering_mode == 'online' %}
                    <a href="{% url 'program_offering_detail' program_offering.pk %}"> 
                      <p class='bg-blue-200 rounded-lg px-4 py-2'>{{ program_offering.temp_id }} :{{program_offering.program.name}}</p>
                    </a>
                    {% endif %}
                  {% endfor %}

                  </div>
            </div>
        
            
          </div> {% endcomment %}
          <div class='text-lg font-semibold'>List of Courses </div>
    
          <section>
          
            
            {% if program.get_list_of_blended_course_for_selected_program %}
            <div class='mt-4 p-4 border-2 border-gray-300  rounded-lg'>
              <h1 class='text-lg font-semibold pt-4'>Blended Courses </h1>
              {% for course in program.get_list_of_blended_course_for_selected_program%}
                {% with course=course %}
                  {% include 'components/flash_card/course_FC.html' %}
                {% endwith %} 
              {{course.offering_mode_is_online}}
                <br>
              {% endfor %}
            </div>
            {% endif %}
            {% if program.get_list_of_online_course_for_selected_program %}
            <div class='mt-4 p-4 border-2 border-gray-300  rounded-lg'>
              <h1 class='text-lg font-semibold pt-4'>Online Courses </h1>
              {% for course in program.get_list_of_online_course_for_selected_program%}
                {% with course=course %}
                  {% include 'components/flash_card/course_FC.html' %}
                {% endwith %} 
              {{course.offering_mode_is_online}}
                <br>
              {% endfor %}
            </div>
            {% endif %}

          </section>



  

</section>
   

{% endblock content %}