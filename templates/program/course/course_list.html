{% extends "base.html" %}
{% block content %}
<section class='w-full'>
    {% comment %} <h1> Program Offering List  </h1> {% endcomment %}
    <section class='my-2 w-full'>


         <!-- infobar -->
         <div class="bg-gray-200 p-4 mb-4 w-full flex flex-row justify-between items-baseline">
          <h2 class="text-xl font-bold mb-2">Course List</h2>
          <div class='flex flex-row gap-4 flex-wrap '>
            <p class="mb-2 ">Total Course: {{courses.count}} (Blended :{{blended_courses_for_current_user|length}}, Online :{{online_courses_for_current_user|length}})</p> |
            <p class="mb-2">Total Students Enrolled: {{total_students|length}} (Blended :{{total_no_of_student_for_blended_courses|length}}, Online :{{total_no_of_student_for_online_courses|length}})</p> |
            {% if total_no_of_at_risk_student >  0 %}
                  <p class='text-red-500'>Students at Risk: {{total_no_of_at_risk_student }}</p>
                  {% else  %}
                  <p>Students at Risk: {{total_no_of_at_risk_student|length}}</p>
                  {% endif %}
          </div>
        </div>
   
  </section>
     <!--Student Performance Chart -->

  <section id='students_attendance_bar_chart1' class='w-full bg-gray-100 rounded-lg  mb-3' style="display: block; "  >

    {% if attendances|length > 0 %}
      {% with title="Student Performace" chart1_data=chart_data_attendance_report_attendance  chart2_data=chart_data_attendance_report_engagement  chart3_data=chart_data_attendance_report_action  chart1_title='Attendance'  chart2_title='Engagement'  chart3_title='Action'  chart1_id='attendance' chart2_id='engagement'  chart3_id='action' %}
      {% include 'components/dashboard/student_performance_pieChart_flow.html' %}
      {% endwith %}
    {% else %}
      <div class='bg-gray-200 p-4'>
          <p> No students found for students attendance report </p>
      </div>
      
    {% endif %}
    
    </section>
   
    <ul class='flex flex-col gap-4 w-3/4'>
      {% comment %} {% for course in courses %}
        {% with course=course %}
            {% include 'components/flash_card/course_FC.html' %}
        {% endwith %} 
      {% endfor %} {% endcomment %}
      <div>
        <section class='my-2 w-full'>
             <!-- Course_offering_infobar -->
             <div class="bg-gray-200 p-4 mb-4 w-full flex flex-row justify-between items-baseline">
              <h2 class="text-xl font-bold mb-2">Blended Course List</h2>
              <div class='flex flex-row gap-4 flex-wrap  '>
                <p class="mb-2 ">Total Blended Course : {{blended_courses_for_current_user|length}}</p> |
                <p class="mb-2 hidden">Active Program : |</p> 
                <p class="mb-2 hidden">Inactive Program : |</p> 
                <p class="mb-2">Total Students Enrolled  : {{total_no_of_student_for_blended_courses|length}}</p> |
                {% if course.calculate_no_at_risk_student_for_last_week|length >  0 %}
                    <p class='text-red-500 '>
                      <a href="{% url 'all-students-at-risk' %}" class='text-red-500'>
                        Students at Risk: {{ course.calculate_no_at_risk_student_for_last_week|length }}
                      </a>
                      </p>
                  {% else  %}
                  <p>Students at Risk: {{course.calculate_no_at_risk_student_for_last_week|length}}</p>
                  {% endif %}
                
              </div>
            </div>
  
      </section>
          <div class='flex gap-4 flex-col'>
          {% for course in blended_courses_for_current_user %}
          
              {% with course=course %}
                  {% include 'components/flash_card/course_FC.html' %}
              {% endwith %} 
            {% endfor %}
          </div>
      </div>
      <!--Online Course-->
      <div>
        <section class='my-2 w-full'>
          <!-- Course_offering_infobar -->
          <div class="bg-gray-200 p-4 mb-4 w-full flex flex-row justify-between items-baseline">
           <h2 class="text-xl font-bold mb-2">Online Course List</h2>
           <div class='flex flex-row gap-4 flex-wrap  '>
             <p class="mb-2 ">Total online Course : {{online_courses_for_current_user|length}}</p> |
             <p class="mb-2 hidden">Active Program : |</p> 
             <p class="mb-2 hidden">Inactive Program : |</p> 
             <p class="mb-2">Total Students Enrolled  : {{total_no_of_student_for_online_courses|length}}</p> |
             {% if course.calculate_no_at_risk_student_for_last_week|length >  0 %}
                 <p class='text-red-500 '>
                   <a href="{% url 'all-students-at-risk' %}" class='text-red-500'>
                     Students at Risk: {{ course.calculate_no_at_risk_student_for_last_week|length }}
                   </a>
                   </p>
               {% else  %}
               <p>Students at Risk: {{course.calculate_no_at_risk_student_for_last_week|length}}</p>
               {% endif %}
             
           </div>
         </div>

   </section>
           <div class='flex gap-4 flex-col'>
          {% for course in online_courses_for_current_user %}
        {% with course=course %}
            {% include 'components/flash_card/course_FC.html' %}
        {% endwith %} 
      {% endfor %}
        </div>
      </div>
      </ul>
      
</section>
  
    
{% endblock content %}