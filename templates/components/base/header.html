{% load custom_tags %}
{% load static %}
{% block content %}
<header class=" bg-gray-200 flex flex-row  fixed w-full z-50 border-b-2 mb-2 border-gray-400">
  <!-- Content for Dashboard, Program, Report, Contact, FAQ, About Us -->
  <!-- You can dynamically load content here based on user selection -->
  <div class="flex items-center  bg-gray-200 w-64 p-4" id='headerCompanyInfo'>
    <button id="toggleSidebar" class="text-gray-400  ">
        <i class="fas fa-bars"></i>
    </button>
    <img src="{% static '/logo/logo.jpeg' %}" alt="Logo" class="w-10 h-08 ml-4 mr-2" id='sidebar_company_logo'>
    <span class="text-lg font-semibold text-gray-400" id='sidebar_company_name'>EduPulse</span>
  </div>

  <div class='flex flex-row justify-between p-4 bg-gray-50 flex-1 items-center'>
      <div class='text tracking-wider font-light text-lg'>
          <!-- Logged in user greeting -->
       
          {% if user.is_authenticated %}
          <span class="mr-4  text"> Hi
            {% comment %} {{ user.first_name }}  {% endcomment %}
            {{ user.last_name }} 
            !</span>
          {% else %}
            <span class="mr-4 text">Welcome, Guest!</span>
          
          {% endif %} 
      </div>
      <div class='flex flex-row'>
        <!-- User options -->
        {% if user.is_authenticated %}
          <!-- User profile pic and name -->
          <div class='flex flex-row justify-center items-center gap-4 '>
              {% comment %} <img src="{{ user.user_image.url }}" alt="{{ user.username }}" class="w-12 h-10 rounded-full"> {% endcomment %}
              {% if current_user.user_image and current_user.user_image.url %}
              <img src="{{ user.user_image.url }}" alt="{{ user.username }}" class="w-12 h-10 rounded-full">
              {% else %}
                <img src="{% static '/default/default_user_image.jpeg' %}" class="w-12 h-10 rounded-full">
                
              {% endif %} 
          <span class="hidden lg:inline  text-center  text-xs font-semibold text-gray-400">{{ user.first_name }} {{ user.last_name }}</span>
          </div>
          
          {% comment %} <a href="{% url 'user-logout' %}" class="text-red-500 md:mr-5 bg-gray-200 px-4 py-2 rounded-lg">Logout</a> {% endcomment %}
          <div class="relative">
            <button id="dropdownToggle" class="md:mr-5 px-4 py-2 rounded-lg flex items-center">
              <i id="arrowIcon" class="fa fa-caret-down text-gray-500 text-2xl"></i>
            </button>
            <div id="dropdownMenu" class="absolute right-0 mt-2 bg-white text-gray-800 text-sm rounded-lg shadow-md hidden">
              <a href="{% url 'user-profile' pk=user.pk  %}" class="inline-block px-4 py-2 hover:bg-gray-100 whitespace-nowrap w-full">User Profile</a>
              <form method='post' action='{% url 'user-logout' %}' class="inline-block px-4 py-2 hover:bg-gray-100 whitespace-nowrap w-full">
                {% csrf_token %}
                <button type='submit'> Logout</button>
              </form>
            </div>
          </div>
        
          {% else %}
          <a href="{% url 'user-login' %}" class="text-blue-500 md:mr-5 bg-gray-200 px-4 py-2 rounded-lg">Login</a>
        
        {% endif %}

        <div class='flex justify-center items-center relative mx-10'>
          <!-- Alert icon with count -->
          <i class="fas fa-bell ml-4 text-xl"></i> 
          <span class="alert-count bg-red-500 text-xs text-white rounded-full absolute top-0 right-0 -mt-0 -mr-2 px-1">3</span>
        </div>

          
      </div>

  </div>

  
</header>
{% endblock %}