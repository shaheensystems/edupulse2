{% load custom_tags %}
{% load static %}
{% block content %}
<header class="fixed top-0 left-0 right-0 bg-gray-100 text-white py-4 px-6 flex flex-row items-center z-50 border-2 border-b-white">
  <!-- Left section with logo and burger menu -->
  <div class="flex items-center w-64  h-full ">
    <button id="sidebarToggle" class="text-gray-400 mr-4 ">
        <i class="fas fa-bars"></i>
    </button>
    <img src="{% static '/logo/logo.jpeg' %}" alt="Logo" class="w-10 h-08 mr-2">
    <span class="text-lg font-semibold text-gray-400">EduPulse</span>
  </div>
  <!-- Right section with user info and logout -->
  <div class='flex flex-row justify-between items-center w-full bg-gray-100 px-4'>
    <div class="flex items-left">

        {% if user.is_authenticated %}
        <span class="mr-4 text-gray-400"> Hi {{ user.first_name }} {{ user.last_name }} !</span>
        
        {% endif %} 

    </div>
    <div class="flex items-left gap-6 ">

        {% if user.is_authenticated %}
        <!-- User profile pic and name -->
        <div class='flex flex-row justify-center items-center gap-4 '>
          {% comment %} <img src="{{ user.user_image.url }}" alt="{{ user.username }}" class="w-12 h-10 rounded-full"> {% endcomment %}
          {% if current_user.user_image and current_user.user_image.url %}
          <img src="{{ user.user_image.url }}" alt="{{ user.username }}" class="w-12 h-10 rounded-full">
          {% else %}
            <img src="{% static '/default/default_user_image.jpeg' %}" class="w-12 h-10 rounded-full">
            
          {% endif %} 
            <span class="hidden lg:inline  text-center  text-xs font-semibold text-gray-400">{{ user.first_name }} {{ user.last_name }}</span>
            </div>
            
            {% comment %} <a href="{% url 'user-logout' %}" class="text-red-500 md:mr-5 bg-gray-200 px-4 py-2 rounded-lg">Logout</a> {% endcomment %}
            <div class="relative">
              <button id="dropdownToggle" class="md:mr-5 px-4 py-2 rounded-lg flex items-center">
                <i id="arrowIcon" class="fa fa-caret-down text-gray-500 text-2xl"></i>
            </button>
              <div id="dropdownMenu" class="absolute right-0 mt-2 bg-white text-gray-800 text-sm rounded-lg shadow-md hidden">
                <a href="{% url 'dashboard' %}" class="inline-block px-4 py-2 hover:bg-gray-100 whitespace-nowrap w-full">User Profile</a>
                <a href="{% url 'user-logout' %}" class="inline-block px-4 py-2 hover:bg-gray-100 whitespace-nowrap w-full">Log Out</a>
            </div>
          </div>
          
            {% else %}
            <a href="{% url 'user-login' %}" class="text-blue-500 md:mr-5 bg-gray-200 px-4 py-2 rounded-lg">Login</a>
      {% endif %}



      <div class="flex items-center">
        <a href="#" class="text-gray-400 relative">
            <i class="fas fa-bell"></i>
            <span class="bg-red-500 text-white text-xs rounded-full w-2 h-4 flex items-center justify-center absolute top-0 right-0 -mt-1 -mr-1">2</span>
        </a>
    </div>
    </div>
    
  </div>

  <script>
    const dropdownToggle = document.getElementById('dropdownToggle');
    const dropdownMenu = document.getElementById('dropdownMenu');
    const arrowIcon = document.getElementById('arrowIcon');

    dropdownToggle.addEventListener('click', () => {
        dropdownMenu.classList.toggle('hidden');
        arrowIcon.classList.toggle('fa-caret-down');
        arrowIcon.classList.toggle('fa-caret-up');
    });
</script>
</header>
{% endblock content %}